<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="author" content="zane">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Load Project </title>
		<link href="movieStyles.css" rel="stylesheet" type="text/css">
		<script  src="https://code.jquery.com/jquery-3.3.1.min.js"
			  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
			  crossorigin="anonymous"></script>
	</head>

	<body>
		<div class="banner">
			<h1 class="title"> My Movie collection </h1>
		</div>
		<nav>
			<ul>
				<li><a id="Home" class="link" href="#">Home</a></li>
				<li><a id="Newest" class="link" href="#">Newest Movies</a></li>
				<li><a id="Fav" class="link" href="#">Favorite Movies </a></li>
				<li><a id="Most" class="link" href="#">Most Watched Movies</a></li>
				<li><a id="Kids" class="link" href="#">Kids Movies</a></li>
			</ul>
		</nav>
		<main>
			<h2 id="subTitle">Home</h2>
				<div id ="imgCol" class="column">
					
				</div>
		</main>
	</body>
		<script>
			
			function intiliaze (){
				document.getElementById("Home").addEventListener("click", home);
				document.getElementById("Newest").addEventListener("click", newest);
				document.getElementById("Fav").addEventListener("click", fav);
				document.getElementById("Most").addEventListener("click", most);
				document.getElementById("Kids").addEventListener("click", kids);

			}
			newsearch = {};
			newsearch.view = function (search){
				//add search to search variable
				var search = search;
				console.log(search);
				//clear the previous images
				var element = document.getElementById("imgCol");
				element.innerHTML = "";
				//go get images with search
				getImages(search); 
			}

			// on click functions for getting images 
			function home (){
				var subTitle = document.getElementById("subTitle");
				subTitle.textContent = "Home";
				var element = document.getElementById("imgCol");
				element.innerHTML = "";
				getImages();
			}
			function newest (){
				var subTitle = document.getElementById("subTitle");
				subTitle.textContent = "Newest Movies";
				search = 'newest';
				newsearch.view(search);
			}
			function fav (){
				var subTitle = document.getElementById("subTitle");
				subTitle.textContent = "Favorite Movies";
				search = 'fav';
				 newsearch.view(search);
			}
			function most (){
				var subTitle = document.getElementById("subTitle");
				subTitle.textContent = "Most Watched Movies";
				search = 'most';
				 newsearch.view(search);
			}
			function kids (){
				var subTitle = document.getElementById("subTitle");
				subTitle.textContent = "Kids Movies";
				search = 'kids';
				 newsearch.view(search);
			}

			//get json object by name
			function getImages (search){
			
				var jsonImage = $.getJSON("imgList.json", function( data ){
					
					images = data[search];

					if (images === undefined){
						var images = data['images'];
					}

					setImages(images);
				})
				.done(function(){
					console.log("second success");
				})
				.fail(function(){
					console.log("error");
				})
				.always(function(){
					console.log("complete");
				})
			};

			//take the names in the array and load into image tags
			function setImages(images){
				//check the object
				console.log(images);
				
				//set the parent container as var
				var element = document.getElementById("imgCol");
				
				// loop object var
				
				 Object.keys(images).forEach(function(key)
				 	{
						console.log(key, JSON.stringify(images[key]));
				 			var count = 0;
				 			var picture = JSON.stringify(images[key]);
				 	 		console.log(picture);
				 	 		var noQuote = picture.replace(/\"/g, '');
				 	 		console.log(picture);
				 	 		//create figure
				 			this.frame = document.createElement("Figure");
							this.frame.setAttribute("id", "imgFigure");
							//create image place
				 			this.img = document.createElement("IMG")
				 			this.img.setAttribute("src", noQuote);
			    			this.img.setAttribute("width", "300");
			    			this.img.setAttribute("width", "200");
			     			this.img.setAttribute("alt", "Movie Images");
				 			//put picture into frame
				 			this.frame.appendChild(this.img);
				 			//put frame into div
				 			element.appendChild(this.frame);
					 	
				 	});
				
				

			};
			function start(){
				getImages();
				intiliaze();
				
			};
			window.onload = start();

			
		</script>
</html>