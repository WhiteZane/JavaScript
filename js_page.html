<!doctype html>
	<head>
		<title> Java script table maker </title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	</head>
	
	<body>
		<div id="div1" class="main"></div>
	</body>
	<style>
			.tbl{
				width:800px;
				margin:0 auto;
			}
			.btn {
				width:150px;
	  			display:inline-block;
	   			margin-left:80vw;
	 			margin-top: 150px;
			}

			/* The Modal (background) */
			.modal {
			    display: none; /* Hidden by default */
			    position: fixed; /* Stay in place */
			    z-index: 1; /* Sit on top */
			    padding-top: 100px; /* Location of the box */
			    left: 0;
			    top: 0;
			    width: 100%; /* Full width */
			    height: 100%; /* Full height */
			    overflow: auto; /* Enable scroll if needed */
			    background-color: rgb(0,0,0); /* Fallback color */
			    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
			}

			/* Modal Content */
			.modal-content {
			    background-color: #fefefe;
			    margin: auto;
			    padding: 20px;
			    border: 1px solid #888;
			    width: 80%;
			}

			/* The Close Button */
			.close {
			    color: #aaaaaa;
			    float: right;
			    font-size: 28px;
			    font-weight: bold;
			}

			.close:hover,
			.close:focus {
			    color: #000;
			    text-decoration: none;
			    cursor: pointer;
			}
	</style>
	<script>
		// This was an activity to help me learn how to better use javascript. 
		// the reason there is little HTML is because the goal was to learn javascript.

		(function() {

			var newpage = {};
			
			// page creating Modal
			newpage.createModal = function Modal(){
				this.modalCreate = document.createElement("div");
				this.modalCreate.setAttribute("id", "createModal" );
				this.modalCreate.setAttribute("class", "modal" );

				this.modalContent1 = document.createElement("div");
				this.modalContent1.setAttribute("class", "modal-content" );

				this.modalSpan1 = document.createElement("span");
				this.modalSpan1.setAttribute("class", "close" );
				this.modalSpanNode1 = document.createTextNode("");
				this.modalSpan1.appendChild(this.modalSpanNode1);

				//Modal form to pass data
				this.modalForm1 = document.createElement("Form");
				this.modalForm1.setAttribute("class", "w3-container w3-teal" );
				//create loop to automate form
				
				
				// create input fields
				
					this.modalFormPara1 = document.createElement("p");
					this.modalFormLabel1 = document.createElement("p");
					this.modalFormLabelNode1 = document.createTextNode("input Title");
					this.modalFormTxtInput1 = document.createElement("INPUT");
					this.modalFormTxtInput1.setAttribute("id", "inputTitle");
					this.modalFormTxtInput1.setAttribute("class", "w3-input");
					this.modalFormTxtInput1.setAttribute("type", "text");
					this.modalFormLabel1.appendChild(this.modalFormLabelNode1);
					this.modalFormPara1.appendChild(this.modalFormLabel1);
					this.modalFormPara1.appendChild(this.modalFormTxtInput1);
					this.modalForm1.appendChild(this.modalFormPara1);

				// create input fields
				
					this.modalFormPara2 = document.createElement("p");
					this.modalFormLabel2 = document.createElement("p");
					this.modalFormLabelNode2 = document.createTextNode("input Rows");
					this.modalFormTxtInput2 = document.createElement("INPUT");
					this.modalFormTxtInput2.setAttribute("id", "inputRows");
					this.modalFormTxtInput2.setAttribute("class", "w3-input");
					this.modalFormTxtInput2.setAttribute("type", "number");
					this.modalFormLabel2.appendChild(this.modalFormLabelNode2);
					this.modalFormPara2.appendChild(this.modalFormLabel2);
					this.modalFormPara2.appendChild(this.modalFormTxtInput2);
					this.modalForm1.appendChild(this.modalFormPara2);
				// create input fields
				
					this.modalFormPara3 = document.createElement("p");
					this.modalFormLabel3 = document.createElement("p");
					this.modalFormLabelNode3 = document.createTextNode("input Columns");
					this.modalFormTxtInput3 = document.createElement("INPUT");
					this.modalFormTxtInput3.setAttribute("id", "inputCols");
					this.modalFormTxtInput3.setAttribute("class", "w3-input");
					this.modalFormTxtInput3.setAttribute("type", "number");
					this.modalFormLabel3.appendChild(this.modalFormLabelNode3);
					this.modalFormPara3.appendChild(this.modalFormLabel3);
					this.modalFormPara3.appendChild(this.modalFormTxtInput3);
					this.modalForm1.appendChild(this.modalFormPara3);
					

				// create buttons
				this.modalFormSave1 = document.createElement("a");
				this.modalFormSave1.setAttribute("id", "create" );
				this.modalFormSave1.setAttribute("class", "save w3-button w3-red");
				this.modalFormSaveNode1 = document.createTextNode("Create");
				this.modalFormCancel1 = document.createElement("a");
				this.modalFormCancel1.setAttribute("id", "cancelCreate" );
				this.modalFormCancel1.setAttribute("class", "cancel w3-button w3-black");
				this.modalFormCancelNode1 = document.createTextNode("Close");
				
				// add text to buttons
				this.modalFormSave1.appendChild(this.modalFormSaveNode1);	
				this.modalFormCancel1.appendChild(this.modalFormCancelNode1); 
				
				// add buttons to form
				this.modalForm1.appendChild(this.modalFormSave1);
				this.modalForm1.appendChild(this.modalFormCancel1);

				// add buttons to 
				// appending to the content
				this.modalContent1.appendChild(this.modalSpan1);
				this.modalContent1.appendChild(this.modalForm1);
				

				this.modalCreate.appendChild(this.modalContent1);
				element.appendChild(this.modalCreate);
				return this;
			}
			
			//open Create page modal
			newpage.openModal = function readyModal(){
				var modal = document.getElementById('createModal');
				modal.style.display = "block";
				return this;
			}
			
			//creates the title
			newpage.newtitle = function makeTitle(){
				console.log(inputTitle.value);
				this.title = document.createElement("h1");
				this.title.setAttribute("class", "w3-container w3-teal" );
				this.titleNode = document.createTextNode(inputTitle.value);
				this.title.appendChild(this.titleNode);
				element.appendChild(this.title);
				return this;
			}
			//creates an edit button
			newpage.createBtn = function makeCreateButton(){
				this.button2 = document.createElement("a");
				this.button2.setAttribute("id", "createBtn" );
				this.button2.setAttribute("class", "w3-btn w3-red btn");

				this.buttonNode2 = document.createTextNode("Create");

				this.button2.appendChild(this.buttonNode2);
				element.appendChild(this.button2);
				return this;
			}
			//creates an edit button
			newpage.editBtn = function makeEditButton(){
				this.button = document.createElement("a");
				this.button.setAttribute("id", "editBtn" );
				this.button.setAttribute("class", "w3-btn w3-teal btn");
				this.button.setAttribute("value", "1");

				this.buttonNode = document.createTextNode("Edit");

				this.button.appendChild(this.buttonNode);
				element.appendChild(this.button);
				return this;
			}
			
			//creates a table
			newpage.newTable = function makeTable(){
				
				this.table = document.createElement('table');
				this.table.setAttribute("class", "w3-table-all w3-large tbl" );
				var rows = inputRows.value;
 				var amount = inputCols.value;
				var counter = 0;
				var col ="";
				
				do {
					var row = this.table.insertRow(0);
					// create columns
					for (var i = 0; i < amount; i++ ){
						
						col[i] = row.insertCell(0);
						//not working should insert text into columns
						col.innerHTML ="To change text press edit";
					
					}
					
					counter ++;
				}
					
				while (counter < rows);
				element.appendChild(this.table);
				return this;
			}
			newpage.newModal = function MakeModal(){
				var rows = inputRows.value;
				var cols = inputCols.value;
				var totalInputs = rows * cols;
				console.log(totalInputs);
				this.modal = document.createElement("div");
				this.modal.setAttribute("id", "myModal" );
				this.modal.setAttribute("class", "modal" );

				this.modalContent = document.createElement("div");
				this.modalContent.setAttribute("class", "modal-content" );

				this.modalSpan = document.createElement("span");
				this.modalSpan.setAttribute("class", "close" );
				this.modalSpanNode = document.createTextNode("");
				this.modalSpan.appendChild(this.modalSpanNode);

				//Modal form to pass data
				this.modalForm = document.createElement("Form");
				this.modalForm.setAttribute("class", "w3-container w3-teal" );
				//create loop to automate form
				var count = totalInputs;
				var i = 0;
				this.modalFormPara = [];
				this.modalFormLabel = [];
				this.modalFormLabelNode = [];
				this.modalFormTxtInput = [];
				// create input fields
				do{
					this.modalFormPara[i] = document.createElement("p");
					this.modalFormLabel = document.createElement("p");
					this.modalFormLabelNode = document.createTextNode("input field", [i]);
					this.modalFormTxtInput[i] = document.createElement("INPUT");
					this.modalFormTxtInput[i].setAttribute("id", [i]);
					this.modalFormTxtInput[i].setAttribute("class", "w3-input");
					this.modalFormTxtInput[i].setAttribute("type", "text");
					this.modalFormLabel.appendChild(this.modalFormLabelNode);
					this.modalFormPara[i].appendChild(this.modalFormLabel);
					this.modalFormPara[i].appendChild(this.modalFormTxtInput[i]);
					this.modalForm.appendChild(this.modalFormPara[i]);
					i++;
				}while (i < count);

				// create buttons
				this.modalFormSave = document.createElement("a");
				this.modalFormSave.setAttribute("id", "save" );
				this.modalFormSave.setAttribute("class", "save w3-button w3-red");
				this.modalFormSaveNode = document.createTextNode("Save");
				this.modalFormCancel = document.createElement("a");
				this.modalFormCancel.setAttribute("id", "cancel" );
				this.modalFormCancel.setAttribute("class", "cancel w3-button w3-black");
				this.modalFormCancelNode = document.createTextNode("Close");
				
				// add text to buttons
				this.modalFormSave.appendChild(this.modalFormSaveNode);	
				this.modalFormCancel.appendChild(this.modalFormCancelNode); 
				
				// add buttons to form
				this.modalForm.appendChild(this.modalFormSave);
				this.modalForm.appendChild(this.modalFormCancel);

				// add buttons to 
				// appending to the content
				this.modalContent.appendChild(this.modalSpan);
				this.modalContent.appendChild(this.modalForm);
				

				this.modal.appendChild(this.modalContent);
				element.appendChild(this.modal);
				return this;

			}
			
			

			
			newpage.init = function initListners(){
				//Click open Modal
				document.getElementById("editBtn").addEventListener("click", openWin);
				
				// click to get rid of a few things for download
				document.getElementById("downloadBtn").addEventListener("click", download);
				
				//Click close Modal
				var span = document.getElementsByClassName("close")[0];
				span.addEventListener("click", closeWin);

				//Click save button 
				document.getElementById("save").addEventListener("click", saveDoc);

				//Click cancel button 
				document.getElementById("cancel").addEventListener("click", closeWin);
				return this;
			}
			
			newpage.variables = function getVars(){
				var cBtn = document.getElementById('createBtn');
				cBtn.style.display = "none";
				var test = Object.create(newpage,{inputTitle:{value:document.getElementById("inputTitle").value}});
				console.log(test);
				var test2 = Object.create(newpage,{inputRows:{value:document.getElementById("inputRows").value}});
				console.log(test2);
				var test3 = Object.create(newpage,{inputCols:{value:document.getElementById("inputCols").value}});
				console.log(test3);
				//continue loading page
				newpage.view();

				return this;
			}

			newpage.view = function saveCreate(){
				//grab the inputs from modal set variables
				closeCreate();

				//create the page 
				newpage.newtitle();
				newpage.editBtn();
				newpage.newModal();
				newpage.newTable();
				newpage.init();
			}

			newpage.rowColumn= function createView(){
				var rows = inputRows.value;
				var cols = inputCols.value;

					var total = rows * cols;
					console.log(total);
					var input = [];
					for(var i = 0; i < total; i++){
						input[i] = document.getElementById(i).value;

					 	// send the data to the table
						document.getElementsByTagName("td")[i].innerHTML = input[i];
					}
			}

			
			//function to close the edit window
			function closeWin(){
				var modal = document.getElementById('myModal');
				modal.style.display = "none";
			}
			function download(){
				// hide buttons
				var cBtn = document.getElementById('createBtn');
				cBtn.style.display = "none";
				var edit = document.getElementById("editBtn")
				edit.style.display = "none";
				var down = document.getElementById("downloadBtn")
				down.style.display = "none";
				alert("made it to function");

			}

			function openWin(){
				var modal = document.getElementById('myModal');
				modal.style.display = "block";

				
			}
						
			//function to save doc
			function saveDoc(){
				//grab the inputs from modal set variables
				newpage.rowColumn();
				 closeWin();
			}
		
		//creating the page	
			
			var element = document.getElementById("div1");
			//ask for page content
			newpage.createBtn();
			newpage.createModal();
			document.getElementById("createBtn").addEventListener("click", newpage.openModal);
			document.getElementById("create").addEventListener("click", newpage.variables);
			document.getElementById("cancelCreate").addEventListener("click", closeCreate);
		

			function closeCreate(){
				var modal = document.getElementById('createModal');
				modal.style.display = "none";	
			}
			
			

		
		


			
		}());
	function removeDownload(){

		var divView = document.getElementById('div1');

		var cBtn = document.getElementById('createBtn');
					
		var edit = document.getElementById("editBtn");
					
		// var down = document.getElementById("downloadBtn");
		
		divView.removeChild(cBtn);
		divView.removeChild(edit);
		// divView.removeChild(down);
			
		// var downloadedPage = document.documentElement.outerHTML;

		// return downloadedPage;
	}
	function help(){
		alert("This page creates a table to get started press create and fill out the form"+ "\n"
				+ "To add to the table press edit and you can input data" +"\n"+
				"If you would like to keep your finished table press Download and a copy will be downloaded"
				+ "\n" + "After downloading you may still see the create button, however it will not work.");
	}
	</script>
	<a id="downloadBtn" onclick="removeDownload();this.href='data:text/html;charset=UTF-8,'+encodeURIComponent(document.documentElement.outerHTML)" class="w3-btn w3-teal btn" href="#" download="js_page.html">Download</a>
	<a id="downloadBtn" onclick="help();" class="w3-btn w3-blue btn" href="#" download="js_page.html">Help</a>
</html>
<script type="text/javascript">
	//add event listeners



	// creating objects and properties
	// var newtest = {};

		// newtest.variable1 = 0;

		// newtest.runme = function r (){
		// 	console.log(this.var1);
		// 	this.variable1 = this.var1;
		// 	return this;
		// }
		// newtest.growme =  function(){
		// 	this.variable1 = this.variable1 + 1;
		// 	console.log(this.variable1);
		// 	// var test = this.var1;
		// 	// test++;
		// 	// newtest.prototype = Object.create(newtest,{var1:{value:test}});
		// 	return this;
		// }
		// newtest.showme = function(){
		// 	console.log(this.variable1);
		// }

		// var test1 = Object.create(newtest,{var1:{value:1}});
		// test1.runme();
		// console.log(test1);


		// var test2 = Object.create(newtest,{var1:{value:2}});
		// test2.runme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();

		// // test2 = newtest.prototype;
		// // console.log(Object.getOwnPropertyNames(newtest));
		// test2.showme();
		// var test3 = Object.create(newtest,{var1:{value:3}});
		// test3.runme();
</script>