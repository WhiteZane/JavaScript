<!doctype html>
	<head>
		<title> Java script Form </title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	</head>
	
	<body>
		<div id="div1" class="main"></div>
	</body>
	<style>
			.tbl{
				width:800px;
				margin:0 auto;
			}
			.btn {
				width:60px;
	  			display:inline-block;
	   			margin-left:80vw;
	 			margin-top: 150px;
			}

			/* The Modal (background) */
			.modal {
			    display: none; /* Hidden by default */
			    position: fixed; /* Stay in place */
			    z-index: 1; /* Sit on top */
			    padding-top: 100px; /* Location of the box */
			    left: 0;
			    top: 0;
			    width: 100%; /* Full width */
			    height: 100%; /* Full height */
			    overflow: auto; /* Enable scroll if needed */
			    background-color: rgb(0,0,0); /* Fallback color */
			    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
			}

			/* Modal Content */
			.modal-content {
			    background-color: #fefefe;
			    margin: auto;
			    padding: 20px;
			    border: 1px solid #888;
			    width: 80%;
			}

			/* The Close Button */
			.close {
			    color: #aaaaaa;
			    float: right;
			    font-size: 28px;
			    font-weight: bold;
			}

			.close:hover,
			.close:focus {
			    color: #000;
			    text-decoration: none;
			    cursor: pointer;
			}
	</style>
	<script>
		
		function title(){
			// creating the title
			this.title = document.createElement("h1");
			this.title.setAttribute("class", "w3-container w3-teal" );
			this.titleNode = document.createTextNode("This is a Javascript Form");
			this.title.appendChild(this.titleNode);
			return this;
		}
		function editBtn(){
			//create edit button	
			this.button = document.createElement("a");
			this.button.setAttribute("id", "editBtn" );
			this.button.setAttribute("class", "w3-btn w3-teal btn" );

			this.buttonNode = document.createTextNode("Edit");

			this.button.appendChild(this.buttonNode);
		}
		
		function table(){
			//create a loop to create table entries
			this.table = document.createElement('table');
			this.table.setAttribute("class", "w3-table-all w3-large tbl" );
			var amount = 1;
			var counter = 0;
			var col ="";
			
			do {
				var row = this.table.insertRow(0);
				// create columns
				for (var i = 0; i < amount; i++ ){
					
					col[i] = row.insertCell(0);
					//not working should insert text into columns
					col.innerHTML ="To change text press edit";
				
				}
				
				counter ++;
			}
				
			while (counter < 3);
		}

		function modal(){
			this.modal = document.createElement("div");
			this.modal.setAttribute("id", "myModal" );
			this.modal.setAttribute("class", "modal" );

			this.modalContent = document.createElement("div");
			this.modalContent.setAttribute("class", "modal-content" );

			this.modalSpan = document.createElement("span");
			this.modalSpan.setAttribute("class", "close" );
			this.modalSpanNode = document.createTextNode("X");
			this.modalSpan.appendChild(this.modalSpanNode);

			//Modal form to pass data
			this.modalForm = document.createElement("Form");
			this.modalForm.setAttribute("class", "w3-container w3-teal" );
			//create loop to automate form
			var count = 3;
			var i = 0;
			this.modalFormPara = [];
			this.modalFormLabel = [];
			this.modalFormLabelNode = [];
			this.modalFormTxtInput = [];
			// create input fields
			do{
				this.modalFormPara[i] = document.createElement("p");
				this.modalFormLabel = document.createElement("p");
				this.modalFormLabelNode = document.createTextNode("input field");
				this.modalFormTxtInput[i] = document.createElement("INPUT");
				this.modalFormTxtInput[i].setAttribute("id", [i]);
				this.modalFormTxtInput[i].setAttribute("class", "w3-input");
				this.modalFormTxtInput[i].setAttribute("type", "text");
				this.modalFormLabel.appendChild(this.modalFormLabelNode);
				this.modalFormPara[i].appendChild(this.modalFormTxtInput[i]);
				this.modalForm.appendChild(this.modalFormPara[i]);
				i++;
			}while (i < count);

			// create buttons
			this.modalFormSave = document.createElement("a");
			this.modalFormSave.setAttribute("id", "save" );
			this.modalFormSave.setAttribute("class", "save w3-button w3-red");
			this.modalFormSaveNode = document.createTextNode("Save");
			this.modalFormCancel = document.createElement("a");
			this.modalFormCancel.setAttribute("id", "cancel" );
			this.modalFormCancel.setAttribute("class", "cancel w3-button w3-black");
			this.modalFormCancelNode = document.createTextNode("Close");
			
			// add text to buttons
			this.modalFormSave.appendChild(this.modalFormSaveNode);	
			this.modalFormCancel.appendChild(this.modalFormCancelNode); 
			
			// add buttons to form
			this.modalForm.appendChild(this.modalFormSave);
			this.modalForm.appendChild(this.modalFormCancel);

			// add buttons to 
			// appending to the content
			this.modalContent.appendChild(this.modalSpan);
			this.modalContent.appendChild(this.modalForm);
			

			this.modal.appendChild(this.modalContent);

			return this.modalFormTxtInput;
		}

		
		
		function NewPage(){
			
			// append items to div element creating the page
			var element = document.getElementById("div1");
			document.getElementById("div1").appendChild(title);
			document.getElementById("div1").appendChild(button);
			document.getElementById("div1").appendChild(table);
			document.getElementById("div1").appendChild(modal);
			return this;

		}
		NewPage.prototype = Object.create(title(),editBtn(),table());

		//checking access
		NewPage.prototype.table = alert("accesing prototype table");

		


		//function to open the edit window
		function openWin(){
			var modal = document.getElementById('myModal');
			modal.style.display = "block";

		}

		//function to close the edit window
		function closeWin(){
			var modal = document.getElementById('myModal');
			modal.style.display = "none";
		}

		//function to save doc
		function saveDoc(){
			//grab the inputs from modal set variables
			
			 
			 var input = document.getElementById("0").value;
			 var input2 = document.getElementById("1").value;
			 var input3 = document.getElementById("2").value;
			 
			 // send the data to the table
			 document.getElementsByTagName("td")[0].innerHTML = input;
			 document.getElementsByTagName("td")[1].innerHTML = input2;
			 document.getElementsByTagName("td")[2].innerHTML = input3;
			 /*document.getElementsByTagName("td")[3].innerHTML = "test 3";
			 document.getElementsByTagName("td")[4].innerHTML = "test 4";
			 document.getElementsByTagName("td")[5].innerHTML = "test 5";*/
			 
			 //close the modal
			 closeWin();

		}

		// function containing other functions to load on start 
		function start(){
			//call the page elements
			var this_modal = modal();
			console.log(this_modal);
			var page = new NewPage();

			//Click open Modal
			document.getElementById("editBtn").addEventListener("click", openWin);
			
			//Click close Modal
			var span = document.getElementsByClassName("close")[0];
			span.addEventListener("click", closeWin);

			//Click save button 
			document.getElementById("save").addEventListener("click", saveDoc);

			//Click cancel button 
			document.getElementById("cancel").addEventListener("click", closeWin);

		}
		
		
		// loads any functions stored in start on window load
		window.onload = start();
		
	</script>
</html>
