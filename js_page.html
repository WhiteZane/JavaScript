<!doctype html>
	<head>
		<title> JS Table Maker </title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="zane">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	</head>
	
	<body>
		<div id="div1" class="main"></div>
	</body>
	<style>
	
			.btnE {
				margin-top:50px;
				margin-bottom: 50px;
				margin-left: 5vw;
			}
			.btn {
				width:150px;
	  			display:inline-block;
	   			margin-left:5vw;
	 			margin-top: 100px;
			}
			/* The Close Button */
			.close {
			    color: #aaaaaa;
			    float: right;
			    font-size: 28px;
			    font-weight: bold;
			}

			.close:hover,
			.close:focus {
			    color: #000;
			    text-decoration: none;
			    cursor: pointer;
			}

			/* The Modal (background) */
			.modal {
			    display: none; /* Hidden by default */
			    position: fixed; /* Stay in place */
			    z-index: 1; /* Sit on top */
			    padding-top: 100px; /* Location of the box */
			    left: 0;
			    top: 0;
			    width: 100%; /* Full width */
			    height: 100%; /* Full height */
			    overflow: auto; /* Enable scroll if needed */
			    background-color: rgb(0,0,0); /* Fallback color */
			    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
			}

			/* Modal Content */
			.modal-content {
			    background-color: #fefefe;
			    margin: auto;
			    padding: 20px;
			    border: 1px solid #888;
			    width: 80%;
			}

			.tbl{
				width:800px;
				margin-top: 10px;
				margin:0 auto;
			}
	</style>
	<script>
		// This was an activity to help me learn how to better use javascript. 
		// the reason there is little HTML is because the goal was to learn javascript.

		(function() {

			var newpage = {};
			
			//This can create the buttons
			newpage.createBtn = function makeButtons(){
	
				var classBtn =this.btnClass;
				console.log(classBtn);
				var nameBtn = this.btnName;
				console.log(nameBtn);

				this.button= [];
				
				this.button[nameBtn] = document.createElement("a");
				this.button[nameBtn].setAttribute("id", nameBtn );
				this.button[nameBtn].setAttribute("class", classBtn);

				// don not use [] with nodes, nodes do not require anything besides defining where it goes.
				this.buttonNode = document.createTextNode(nameBtn, [nameBtn]);

				this.button[nameBtn].appendChild(this.buttonNode);
				//create button 
				element.appendChild(this.button[nameBtn]);
				
				return this;

			}

			// page creating Modal
			newpage.createModal = function Modal(){
				this.modalCreate = document.createElement("div");
				this.modalCreate.setAttribute("id", "createModal" );
				this.modalCreate.setAttribute("class", "modal" );

				this.modalContent1 = document.createElement("div");
				this.modalContent1.setAttribute("class", "modal-content" );

				this.modalSpan1 = document.createElement("span");
				this.modalSpan1.setAttribute("class", "close" );
				this.modalSpanNode1 = document.createTextNode("");
				this.modalSpan1.appendChild(this.modalSpanNode1);

				//Modal form to pass data
				this.modalForm1 = document.createElement("Form");
				this.modalForm1.setAttribute("class", "w3-container w3-teal");
				//create loop to automate form
				
				
				// create input fields
				
					this.modalFormPara1 = document.createElement("p");
					this.modalFormLabel1 = document.createElement("p");
					this.modalFormLabelNode1 = document.createTextNode("input Title");
					this.modalFormTxtInput1 = document.createElement("INPUT");
					this.modalFormTxtInput1.setAttribute("id", "inputTitle");
					this.modalFormTxtInput1.setAttribute("class", "w3-input");
					this.modalFormTxtInput1.setAttribute("type", "text");
					this.modalFormLabel1.appendChild(this.modalFormLabelNode1);
					this.modalFormPara1.appendChild(this.modalFormLabel1);
					this.modalFormPara1.appendChild(this.modalFormTxtInput1);
					this.modalForm1.appendChild(this.modalFormPara1);

				// create input fields
				
					this.modalFormPara2 = document.createElement("p");
					this.modalFormLabel2 = document.createElement("p");
					this.modalFormLabelNode2 = document.createTextNode("input Rows");
					this.modalFormTxtInput2 = document.createElement("INPUT");
					this.modalFormTxtInput2.setAttribute("id", "inputRows");
					this.modalFormTxtInput2.setAttribute("class", "w3-input");
					this.modalFormTxtInput2.setAttribute("type", "number");
					this.modalFormLabel2.appendChild(this.modalFormLabelNode2);
					this.modalFormPara2.appendChild(this.modalFormLabel2);
					this.modalFormPara2.appendChild(this.modalFormTxtInput2);
					this.modalForm1.appendChild(this.modalFormPara2);
				
				// create input fields
				
					this.modalFormPara3 = document.createElement("p");
					this.modalFormLabel3 = document.createElement("p");
					this.modalFormLabelNode3 = document.createTextNode("input Columns");
					this.modalFormTxtInput3 = document.createElement("INPUT");
					this.modalFormTxtInput3.setAttribute("id", "inputCols");
					this.modalFormTxtInput3.setAttribute("class", "w3-input");
					this.modalFormTxtInput3.setAttribute("type", "number");
					this.modalFormLabel3.appendChild(this.modalFormLabelNode3);
					this.modalFormPara3.appendChild(this.modalFormLabel3);
					this.modalFormPara3.appendChild(this.modalFormTxtInput3);
					this.modalForm1.appendChild(this.modalFormPara3);
					

				// create buttons
				this.modalFormSave1 = document.createElement("a");
				this.modalFormSave1.setAttribute("id", "createBtn" );
				this.modalFormSave1.setAttribute("class", "save w3-button w3-red");
				this.modalFormSaveNode1 = document.createTextNode("Create");
				this.modalFormCancel1 = document.createElement("a");
				this.modalFormCancel1.setAttribute("id", "cancelCreate" );
				this.modalFormCancel1.setAttribute("class", "cancel w3-button w3-black");
				this.modalFormCancelNode1 = document.createTextNode("Close");
				
				// add text to buttons
				this.modalFormSave1.appendChild(this.modalFormSaveNode1);	
				this.modalFormCancel1.appendChild(this.modalFormCancelNode1); 
				
				// add buttons to form
				this.modalForm1.appendChild(this.modalFormSave1);
				this.modalForm1.appendChild(this.modalFormCancel1);

				// add buttons to 
				// appending to the content
				this.modalContent1.appendChild(this.modalSpan1);
				this.modalContent1.appendChild(this.modalForm1);
				

				this.modalCreate.appendChild(this.modalContent1);
				element.appendChild(this.modalCreate);
				return this;
			}
			
			//open Create page modal
			newpage.openModal = function readyModal(){
				
				var modal = document.getElementById('createModal');
				modal.style.display = "block";
				return this;
			}
			
			//creates the title
			newpage.newtitle = function makeTitle(){
				console.log(inputTitle.value);
				this.title = document.createElement("h1");
				this.title.setAttribute("class", "w3-container w3-teal" );
				this.title.setAttribute("id", "myTitle" );
				this.titleNode = document.createTextNode(inputTitle.value);
				this.title.appendChild(this.titleNode);
				element.appendChild(this.title);
				return this;
			}

			//This creates the modal for the edit button to input values
			newpage.newModal = function MakeModal(){
				var rows = inputRows.value;
				var cols = inputCols.value;
				var totalInputs = rows * cols;
				console.log(totalInputs);
				this.modal = document.createElement("div");
				this.modal.setAttribute("id", "myModal" );
				this.modal.setAttribute("class", "modal" );

				this.modalContent = document.createElement("div");
				this.modalContent.setAttribute("class", "modal-content" );

				this.modalSpan = document.createElement("span");
				this.modalSpan.setAttribute("class", "close" );
				this.modalSpanNode = document.createTextNode("");
				this.modalSpan.appendChild(this.modalSpanNode);

				//Modal form to pass data
				this.modalForm = document.createElement("Form");
				this.modalForm.setAttribute("class", "w3-container w3-teal" );
				
				//create loop to automate form
				var count = totalInputs;
				var i = 0;
				this.modalFormPara = [];
				this.modalFormLabel = [];
				this.modalFormLabelNode = [];
				this.modalFormTxtInput = [];
				
				// create input fields
				do{
					this.modalFormPara[i] = document.createElement("p");
					this.modalFormLabel = document.createElement("p");
					this.modalFormLabelNode = document.createTextNode("input field", [i]);
					this.modalFormTxtInput[i] = document.createElement("INPUT");
					this.modalFormTxtInput[i].setAttribute("id", [i]);
					this.modalFormTxtInput[i].setAttribute("class", "w3-input");
					this.modalFormTxtInput[i].setAttribute("type", "text");
					this.modalFormLabel.appendChild(this.modalFormLabelNode);
					this.modalFormPara[i].appendChild(this.modalFormLabel);
					this.modalFormPara[i].appendChild(this.modalFormTxtInput[i]);
					this.modalForm.appendChild(this.modalFormPara[i]);
					i++;
				}while (i < count);

				// create buttons
				this.modalFormSave = document.createElement("a");
				this.modalFormSave.setAttribute("id", "save" );
				this.modalFormSave.setAttribute("class", "save w3-button w3-red");
				this.modalFormSaveNode = document.createTextNode("Add");
				this.modalFormCancel = document.createElement("a");
				this.modalFormCancel.setAttribute("id", "cancel" );
				this.modalFormCancel.setAttribute("class", "cancel w3-button w3-black");
				this.modalFormCancelNode = document.createTextNode("Close");
				
				// add text to buttons
				this.modalFormSave.appendChild(this.modalFormSaveNode);	
				this.modalFormCancel.appendChild(this.modalFormCancelNode); 
				
				// add buttons to form
				this.modalForm.appendChild(this.modalFormSave);
				this.modalForm.appendChild(this.modalFormCancel);

				// add buttons to 
				// appending to the content
				this.modalContent.appendChild(this.modalSpan);
				this.modalContent.appendChild(this.modalForm);
				
				//sending to div1 and appending to modal
				this.modal.appendChild(this.modalContent);
				element.appendChild(this.modal);
				return this;
			}

			//creates a table
			newpage.newTable = function makeTable(){
				
				this.table = document.createElement('table');
				this.table.setAttribute("id", "myTable" );
				this.table.setAttribute("class", "w3-table-all w3-large tbl" );
				var rows = inputRows.value;
 				var amount = inputCols.value;
				var counter = 0;
				var col ="";
				
				do {
					var row = this.table.insertRow(0);
					// create columns
					for (var i = 0; i < amount; i++ ){
						
						col[i] = row.insertCell(0);
						//not working should insert text into columns
						col.innerHTML ="To change text press edit";
					
					}
					
					counter ++;
				}
					
				while (counter < rows);
				element.appendChild(this.table);
				return this;
			}
			
			//Intializes the Event listners
			newpage.init = function initListners(){
				//Click open Modal
				document.getElementById("Edit").addEventListener("click", openWin);
				
				// click to get rid of a few things for download
				document.getElementById("downloadBtn").addEventListener("click", download);
				
				//Click close Modal
				var span = document.getElementsByClassName("close")[0];
				span.addEventListener("click", closeWin);

				//Click save button 
				document.getElementById("save").addEventListener("click", saveDoc);

				//Click cancel button 
				document.getElementById("cancel").addEventListener("click", closeWin);
				return this;
			}
			// Startes to create objects and get inputs and assign to properties
			newpage.variables = function getVarsCreateView(){
				var cBtn = document.getElementById('create');
					cBtn.style.display = "none";
				
				//run object to help me know what is being called
				var run = Object.create(newpage);
				
				//load title
				var title = Object.create(newpage,{inputTitle:{value:document.getElementById("inputTitle").value}});
					console.log(title);
					title.newtitle();
					console.log(title);
				
				//load rows and cols
				var test2 = Object.create(newpage, {inputRows:{value:document.getElementById("inputRows").value}}, {inputCols:{value:document.getElementById("inputCols").value}});
					console.log(test2);
				
				//make an edit button
				var mkEditBtn = Object.create(newpage, {btnName:{value:"Edit"}, btnClass:{value:"w3-btn w3-teal btnE"}});
					console.log(mkEditBtn);
					mkEditBtn.createBtn();
				
				// load the rest of the page 
				//pass information to modal and table 
				test2.newModal();
				test2.newTable();
				
				//call event listners 
				run.init();

				closeCreate();

				//learning how to check properties
				console.log(newpage.hasOwnProperty('newtitle'));

				return this;
			}

			//Clears the Create Modal so it can be used again after download
			newpage.clearModal = function clearCreateModal(){
				//find the parent container
				var divView = document.getElementById('div1');
				
				//find the create modal
				var modalCreate = document.getElementById('createModal');
				if (modalCreate === null){
					return;
				}else{
					divView.removeChild(modalCreate);
				}


			}
			
			//Clears most page content so new tables can be created after download 
			newpage.clearPage = function clearContent(){
				
				//find elements and remove
				var divView = document.getElementById('div1');
				
				var title = document.getElementById('myTitle');
					console.log(title);
				var table = document.getElementById('myTable');
				var modal = document.getElementById('myModal');
				if (title === null){
					var start  = Object.create(newpage);
					start.variables();
				}else{
					divView.removeChild(title);
					divView.removeChild(table);
					divView.removeChild(modal);

					var start  = Object.create(newpage);
					start.variables();
				}
					

				
			}

			//Assigns the input value to output values
			newpage.rowColumn= function createView(){
				var rows = inputRows.value;
				var cols = inputCols.value;

					var total = rows * cols;
					console.log(total);
					var input = [];
					for(var i = 0; i < total; i++){
						input[i] = document.getElementById(i).value;

					 	// send the data to the table
						document.getElementsByTagName("td")[i].innerHTML = input[i];
					}
			}

			//function to close the edit window
			function closeWin(){
				var modal = document.getElementById('myModal');
				modal.style.display = "none";
			}
			
			function closeCreate(){
				var modal = document.getElementById('createModal');
				modal.style.display = "none";	
			}
			//Removes buttons getting the page ready for download
			function download(){
				// hide buttons
				var cBtn = document.getElementById('create');
				cBtn.style.display = "none";

			}

			//Opens the modal for inputs 
			function openWin(){
				var modal = document.getElementById('myModal');
				modal.style.display = "block";

				
			}
						
			//function to save doc
			function saveDoc(){
				//grab the inputs from modal set variables
				newpage.rowColumn();
				 closeWin();
			}

		
			//creating the page	
			
			var element = document.getElementById("div1");
			
			//ask for page content
			var buttonCreateName = 'create';
			var buttonCreateClass = "w3-btn w3-red btn";
			var mkCreateBtn = Object.create(newpage, {btnName:{value:buttonCreateName}, btnClass:{value:buttonCreateClass}});
				console.log(mkCreateBtn);
				mkCreateBtn.createBtn();
			newpage.clearModal();
			newpage.createModal();
			
			document.getElementById("create").addEventListener("click", newpage.openModal);
			document.getElementById("createBtn").addEventListener("click", newpage.clearPage);
			document.getElementById("cancelCreate").addEventListener("click", closeCreate);
			
			return this;
			// closes the Modal that creates the page
			
		}());
	
	//remove some buttons
	function removeDownload(){

		var divView = document.getElementById('div1');

		var cBtn = document.getElementById('create');
	
		var edit = document.getElementById("Edit");
					
		// var down = document.getElementById("downloadBtn");
		
		divView.removeChild(cBtn);
		divView.removeChild(edit);
		
	}

	//helpful information for using the program
	function help(){
		alert("This page creates a table to get started press create and fill out the form"
				+ "\n" +  "If you would like to restart the application press F5."
				+ "\n" +  "To add to the table press edit and you can input data" +"\n"+
				"If you would like to keep your finished table press Download and a copy will be downloaded"
				+ "\n" + "After downloading the program will still be able to run locally." 
				+ "\n" + "However you cannot edit your previous table it cannot be deleted unless you delete the file"
				+ "\n" + "You can use the create button to make a new table, but you will need to download the new table to save it.");
	}
	</script>
	<a id="downloadBtn" onclick="help();" class="w3-btn w3-blue btn" href="#" download="js_page.html">Help</a>
	<a id="downloadBtn" onclick="removeDownload();this.href='data:text/html;charset=UTF-8,'+encodeURIComponent(document.documentElement.outerHTML)" class="w3-btn w3-teal btn" href="#" download="js_page.html">Download</a>
</html>
<script type="text/javascript">
	//add event listeners

	// creating objects and properties
	// var newtest = {};

		// newtest.variable1 = 0;

		// newtest.runme = function r (){
		// 	console.log(this.var1);
		// 	this.variable1 = this.var1;
		// 	return this;
		// }
		// newtest.growme =  function(){
		// 	this.variable1 = this.variable1 + 1;
		// 	console.log(this.variable1);
		// 	// var test = this.var1;
		// 	// test++;
		// 	// newtest.prototype = Object.create(newtest,{var1:{value:test}});
		// 	return this;
		// }
		// newtest.showme = function(){
		// 	console.log(this.variable1);
		// }

		// var test1 = Object.create(newtest,{var1:{value:1}});
		// test1.runme();
		// console.log(test1);


		// var test2 = Object.create(newtest,{var1:{value:2}});
		// test2.runme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();
		// test2.showme();
		// test2.growme();

		// // test2 = newtest.prototype;
		// // console.log(Object.getOwnPropertyNames(newtest));
		// test2.showme();
		// var test3 = Object.create(newtest,{var1:{value:3}});
		// test3.runme();
</script>